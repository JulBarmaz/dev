var basketWidgetID=new Array;function addToBasketSingle(t){addToBasket(t,!0)}function addToBasket(t,a){var e;return e="function"==typeof window.getOptionsForBasket?getOptionsForBasket(t):new FormData,void 0!==$("#quant_"+t).val()&&(0!=$("#quant_"+t).val()&&(e.append("type","module"),e.append("option","ajax"),e.append("module","catalog"),e.append("task","addBasketPosition"),e.append("view","goods"),e.append("psid",t),e.append("quantity",$("#quant_"+t).val()),ajaxShowActivity(),void $.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,url:siteConfig.siteUrl+"index.php",data:e,success:function(t){"OK"==t.result&&updateMiniBasket(),""!=t.redirect&&1==a?document.location.href=t.redirect:alert(t.message),ajaxHideActivity()},error:function(){ajaxHideActivity()}})))}function deleteBasketPosition(t,a){ajaxShowActivity(),$.ajax({url:siteConfig.siteUrl+"index.php",data:{type:"module",option:"ajax",module:"catalog",psid:t,task:"deleteBasketPosition",view:"goods"},success:function(t){basket_parent=$("#"+a).parent(),$("#"+a).remove(),basket_parent.append(t),ajaxHideActivity(),updateMiniBasket()},error:function(){ajaxHideActivity()}})}function updateBasketPosition(t,a,e){a=$("#"+e+" #"+a).val();ajaxShowActivity(),$.ajax({url:siteConfig.siteUrl+"index.php",data:{type:"module",option:"ajax",module:"catalog",psid:t,task:"updateBasketPosition",view:"goods",quantity:a},success:function(t){basket_parent=$("#"+e).parent(),$("#"+e).remove(),ajaxHideActivity(),basket_parent.html(t),afterAjaxUpdate("mybasket_ajax"),updateMiniBasket()},error:function(){ajaxHideActivity()}})}function changeOrderStep(t){$("#step").val(t)}function updateMiniBasket(){void 0!==basketWidgetID&&$.ajax({url:siteConfig.siteUrl+"index.php",data:{type:"module",option:"ajax",module:"catalog",task:"getMiniBasket",view:"goods"},success:function(e){$.each(basketWidgetID,function(t,a){$("#"+a).html(e),afterAjaxUpdate(a)})},error:function(){}})}