CKEDITOR.pasteFilters.image=function(e,t,n){var i=[];if(n&&0!==(t=function(e){for(var t,n=/<img[^>]+src="([^"]+)[^>]+/g,i=[];t=n.exec(e);)i.push(t[1]);return i}(e)).length&&0!==(n=function(e){var t,n=[],i=/(\{\\pict[^{}]+?|\{\\\*\\shppict\{\\pict\{\\\*[^*]+?)\\(?:jpeg|png)blip/;if(e=e.match(new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g")))for(var r=0;r<e.length;r++)if(i.test(e[r])){if(-1!==e[r].indexOf("\\pngblip"))t="image/png";else{if(-1===e[r].indexOf("\\jpegblip"))continue;t="image/jpeg"}n.push({hex:t?e[r].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:t})}return n}(n)).length&&(CKEDITOR.tools.array.forEach(n,function(e){i.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)},this),t.length===i.length))for(n=0;n<t.length;n++)0===t[n].indexOf("file://")&&i[n]&&(e=e.replace(t[n],i[n]));return e};