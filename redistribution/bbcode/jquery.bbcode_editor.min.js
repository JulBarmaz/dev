function insert(t,e){var a,s;e=jQuery.extend({open_tag:"",close_tag:"",move_caret:!0},e),"selectionStart"in t?(a=t.selectionStart,s=t.selectionEnd,sel=e.open_tag+t.value.substring(a,s)+e.close_tag,newPos=a+sel.length-e.close_tag.length,t.value=t.value.substring(0,a)+sel+t.value.substring(s,t.value.length),e.move_caret&&t.setSelectionRange(newPos,newPos)):document.selection?(t.focus(),(sel=document.selection.createRange()).text=e.open_tag+sel.text+e.close_tag,e.move_caret&&(sel.collapse(!0),newPos=sel.text.length-e.close_tag.length,sel.moveStart("character",newPos),sel.moveEnd("character",newPos),sel.select())):t.value+=e.open_tag+t.value+e.close_tag,t.focus()}jQuery.fn.bbcode_editor=function(a){return a=jQuery.extend({tag_p:!0,tag_br:!0,tag_b:!0,tag_i:!0,tag_s:!0,tag_u:!0,tag_url:!0,tag_img:!0,tag_size:!0,tag_color:!0,tag_ul:!0,tag_ol:!0,tag_code:!0,tag_h1:!0,tag_h2:!0,tag_h3:!0,tag_h4:!0,tag_h5:!0,tag_h6:!0,separator:["br","u","img","color","ol","code"],move_caret:!0},a),this.each(function(){tags=[[a.tag_p,"p","[p]","[/p]",!1],[a.tag_br,"br","[br]","",!1],[a.tag_b,"b","[b]","[/b]",!1],[a.tag_i,"i","[i]","[/i]",!1],[a.tag_s,"s","[s]","[/s]",!1],[a.tag_u,"u","[u]","[/u]",!1],[a.tag_url,"url","[url=","[/url]",!0],[a.tag_img,"img","[img]","[/img]",!1],[a.tag_size,"size","[size=","[/size]",!0],[a.tag_color,"color","[color=","[/color]",!0],[a.tag_ul,"ul","[list][*]","[/list]",!1],[a.tag_ol,"ol","[list=1][*]","[/list]",!1],[a.tag_code,"code","[code]","[/code]",!1],[a.tag_h1,"h1","[h1]","[/h1]",!1],[a.tag_h2,"h2","[h2]","[/h2]",!1],[a.tag_h3,"h3","[h3]","[/h3]",!1],[a.tag_h4,"h4","[h4]","[/h4]",!1],[a.tag_h5,"h5","[h5]","[/h5]",!1],[a.tag_h6,"h6","[h6]","[/h6]",!1]];var t=$(this).attr("id"),e=$("#"+t);for(bbcode_editor_bar="<div class='bbcode_editor_bar col-md-12'><ul>",tags_len=tags.length,i=0;i<tags_len;i++)if(tags[i][0]&&(tags[i][4]?(click='ta=$("#'+t+'").get(0);txt=prompt("'+tags[i][1]+'");if(txt!=null){insert(ta,{open_tag:"'+tags[i][2]+'"+txt+"]",close_tag:"'+tags[i][3]+'",move_caret:'+a.move_caret+"});}return false;",bbcode_editor_bar+="<li><a onclick='"+click+"' title='"+tags[i][2]+"]"+tags[i][3]+"' href='#' id='#"+tags[i][1]+t+"' class='"+tags[i][1]+"'><i>&nbsp;&nbsp;&nbsp;&nbsp;</i></a></li>"):bbcode_editor_bar+="<li><a onclick='insert($(\"#"+t+'").get(0),{open_tag:"'+tags[i][2]+'",close_tag:"'+tags[i][3]+'",move_caret:'+a.move_caret+"});return false;' title='"+tags[i][2]+tags[i][3]+"' href='#' id='#"+tags[i][1]+t+"' class='"+tags[i][1]+"'><i>&nbsp;&nbsp;&nbsp;&nbsp;</i></a></li>"),a.separator)for(sep_len=a.separator.length,j=0;j<sep_len;j++)a.separator[j]==tags[i][1]&&(bbcode_editor_bar+="<li><a class='separator' href='#'><b></b></a></li>");bbcode_editor_bar+="</ul></div>",e.wrap('<div class="bb_editor_main row"></div>'),e.before(bbcode_editor_bar),e.wrap('<div class="col-md-12"></div>')})};