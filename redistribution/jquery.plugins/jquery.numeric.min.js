!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(v){v.fn.numeric=function(e,t){void 0===(e=(e="boolean"==typeof e?{decimal:e,negative:!0,decimalPlaces:-1}:e)||{}).negative&&(e.negative=!0);var n=!1===e.decimal?"":e.decimal||".",i=!1===e.altDecimal?"":e.altDecimal||n,a=!0===e.negative,e=void 0===e.decimalPlaces?-1:e.decimalPlaces;return t="function"==typeof t?t:function(){},this.data("numeric.decimal",n).data("numeric.altDecimal",i).data("numeric.negative",a).data("numeric.callback",t).data("numeric.decimalPlaces",e).keypress(v.fn.numeric.keypress).keyup(v.fn.numeric.keyup).blur(v.fn.numeric.blur)},v.fn.numeric.keypress=function(e){var t=v.data(this,"numeric.decimal"),n=v.data(this,"numeric.negative"),i=v.data(this,"numeric.decimalPlaces"),a=v.data(this,"numeric.altDecimal"),r=e.charCode||e.keyCode||0;if(13==r&&"input"==this.nodeName.toLowerCase())return!0;if(13==r)return!1;if(35==r||36==r||37==r)return!1;var c=!1;if(e.ctrlKey&&97==r||e.ctrlKey&&65==r)return!0;if(e.ctrlKey&&120==r||e.ctrlKey&&88==r)return!0;if(e.ctrlKey&&99==r||e.ctrlKey&&67==r)return!0;if(e.ctrlKey&&122==r||e.ctrlKey&&90==r)return!0;if(e.ctrlKey&&118==r||e.ctrlKey&&86==r||e.shiftKey&&45==r)return!0;if(r<48||57<r){var l=v(this).val();if(0!==v.inArray("-",l.split(""))&&n&&45==r&&(0===l.length||0===parseInt(v.fn.getSelectionStart(this),10)))return!0;t&&r==t.charCodeAt(0)&&-1!=v.inArray(t,l.split(""))&&(c=!1),8!=r&&9!=r&&13!=r&&35!=r&&36!=r&&37!=r&&39!=r&&46!=r?c=!1:void 0!==e.charCode&&(e.keyCode==e.which&&0!==e.which?(c=!0,46==e.which&&(c=!1)):0!==e.keyCode&&0===e.charCode&&0===e.which&&(c=!0)),(t&&r==t.charCodeAt(0)||a&&r==a.charCodeAt(0))&&(c=-1==v.inArray(t,l.split("")))}else{c=!0;t&&0<i&&(n=v.fn.getSelectionStart(this),e=v.fn.getSelectionEnd(this),r=v.inArray(t,v(this).val().split("")),n===e&&0<=r&&r<n&&v(this).val().length>r+i&&(c=!1))}return c},v.fn.numeric.keyup=function(e){var t=v(this).val();if(t&&0<t.length){for(var n=v.fn.getSelectionStart(this),i=v.fn.getSelectionEnd(this),a=v.data(this,"numeric.decimal"),r=v.data(this,"numeric.negative"),c=v.data(this,"numeric.decimalPlaces"),l=v.data(this,"numeric.altDecimal"),u=(""!==a&&null!==a&&(0===(f=v.inArray(a,t.split("")))&&(this.value="0"+t,n++,i++),1==f&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1),n++,i++),t=this.value),[0,1,2,3,4,5,6,7,8,9,"-",a]),s=t.length,d=s-1;0<=d;d--){for(var m=t.charAt(d),o=(0!==d&&"-"==m?t=t.substring(0,d)+t.substring(d+1):0!==d||r||"-"!=m||(t=t.substring(1)),!1),h=0;h<u.length;h++)if(m==u[h]){o=!0;break}o||m!=l||(t=t.substring(0,d)+a+t.substring(d+1),o=!0),o&&" "!=m||(t=t.substring(0,d)+t.substring(d+1))}var f,g=v.inArray(a,t.split(""));if(0<g)for(var y=s-1;g<y;y--)t.charAt(y)==a&&(t=t.substring(0,y)+t.substring(y+1));a&&0<c&&0<=(f=v.inArray(a,t.split("")))&&(t=t.substring(0,f+c+1),i=Math.min(t.length,i)),this.value=t,v.fn.setSelection(this,[n,i])}},v.fn.numeric.blur=function(){var e=v.data(this,"numeric.decimal"),t=v.data(this,"numeric.callback"),n=v.data(this,"numeric.negative"),i=this.value;""===i||new RegExp("^"+(n?"-?":"")+"\\d+$|^"+(n?"-?":"")+"\\d*"+e+"\\d+$").exec(i)||t.apply(this)},v.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.altDecimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",v.fn.numeric.keypress).unbind("keyup",v.fn.numeric.keyup).unbind("blur",v.fn.numeric.blur)},v.fn.getSelectionStart=function(e){if("number"!==e.type){var t;if(e.createTextRange&&document.selection)return(t=document.selection.createRange().duplicate()).moveEnd("character",e.value.length),""==t.text?e.value.length:Math.max(0,e.value.lastIndexOf(t.text));try{return e.selectionStart}catch(e){return 0}}},v.fn.getSelectionEnd=function(e){var t;if("number"!==e.type)return e.createTextRange&&document.selection?((t=document.selection.createRange().duplicate()).moveStart("character",-e.value.length),t.text.length):e.selectionEnd},v.fn.setSelection=function(e,t){if((t="number"==typeof t?[t,t]:t)&&t.constructor==Array&&2==t.length)if("number"===e.type)e.focus();else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t[0]),n.moveEnd("character",t[1]-t[0]),n.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(e){}}}});